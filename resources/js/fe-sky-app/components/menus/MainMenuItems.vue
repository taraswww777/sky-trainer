<template>
  <nav :class="bem()">
    <div :class="bem('item')">
      <router-link to="/" @click="onClose" active-class="active" :class="bem('link')">
        <span :class="bem('icon')">
          <!-- <img src="../../../../img/logo.svg" alt=""> -->
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.87935 5.71163C6.87935 5.71163 6.5135 5.34577 6.5135 4.82837C6.5135 4.82837 6.5135 4.31097 6.87935 3.94511L9.12063 1.70384C9.12063 1.70384 9.48648 1.33798 10.0039 1.33798C10.0039 1.33798 10.5213 1.33798 10.8871 1.70384L13.1268 3.94345C13.1268 3.94345 13.4926 4.30931 13.4926 4.82671C13.4926 4.82671 13.4926 5.34411 13.1268 5.70997L10.8855 7.95124C10.8855 7.95124 10.5196 8.3171 10.0022 8.3171C10.0022 8.3171 9.48483 8.3171 9.11897 7.95124L6.87935 5.71163ZM7.76261 4.82837L10.0022 7.06798L12.2435 4.82671L10.0039 2.5871L7.76261 4.82837Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.8774 10.7082C11.8774 10.7082 11.5115 10.3424 11.5115 9.82495C11.5115 9.82495 11.5115 9.30755 11.8774 8.94169L14.1187 6.70042C14.1187 6.70042 14.4845 6.33456 15.0019 6.33456C15.0019 6.33456 15.5193 6.33456 15.8852 6.70042L18.1248 8.94003C18.1248 8.94003 18.4907 9.30589 18.4907 9.82329C18.4907 9.82329 18.4907 10.3407 18.1248 10.7066L15.8835 12.9478C15.8835 12.9478 15.5177 13.3137 15.0003 13.3137C15.0003 13.3137 14.4829 13.3137 14.117 12.9478L11.8774 10.7082ZM12.7607 9.82495L15.0003 12.0646L17.2415 9.82329L15.0019 7.58368L12.7607 9.82495Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M1.88326 10.7009C1.88326 10.7009 1.5174 10.335 1.5174 9.81763C1.5174 9.81763 1.5174 9.30023 1.88326 8.93437L4.12453 6.6931C4.12453 6.6931 4.49039 6.32724 5.00779 6.32724C5.00779 6.32724 5.52519 6.32724 5.89105 6.6931L8.13067 8.93271C8.13067 8.93271 8.49652 9.29857 8.49652 9.81597C8.49652 9.81597 8.49652 10.3334 8.13067 10.6992L5.88939 12.9405C5.88939 12.9405 5.52354 13.3064 5.00613 13.3064C5.00613 13.3064 4.48873 13.3064 4.12288 12.9405L1.88326 10.7009ZM2.76652 9.81763L5.00613 12.0572L7.24741 9.81597L5.00779 7.57636L2.76652 9.81763Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M6.88131 15.6977C6.88131 15.6977 6.51545 15.3319 6.51545 14.8145C6.51545 14.8145 6.51545 14.2971 6.88131 13.9312L9.12258 11.6899C9.12258 11.6899 9.48844 11.3241 10.0058 11.3241C10.0058 11.3241 10.5232 11.3241 10.8891 11.6899L13.1287 13.9295C13.1287 13.9295 13.4946 14.2954 13.4946 14.8128C13.4946 14.8128 13.4946 15.3302 13.1287 15.6961L10.8874 17.9373C10.8874 17.9373 10.5216 18.3032 10.0042 18.3032C10.0042 18.3032 9.48678 18.3032 9.12092 17.9373L6.88131 15.6977ZM7.76457 14.8145L10.0042 17.0541L12.2455 14.8128L10.0058 12.5732L7.76457 14.8145Z" />
          </svg>
        </span>

        <span :class="bem('name')">Главная</span>
      </router-link>
    </div>
    <div :class="bem('item')">
      <router-link to="/profile" @click="onClose" active-class="active" :class="bem('link')">
        <!-- <Fa :icon="['far','id-badge']"/> -->
        <span :class="bem('icon')">
          <!-- <svg class="icon-svg"><use xlink:href="../../../../img/sprite.svg#ic_menu1"></use></svg> -->
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M4.375 2.5H15.625C15.7907 2.5 15.9497 2.56592 16.0669 2.68311C16.1841 2.80029 16.25 2.95929 16.25 3.125V16.875C16.25 17.0407 16.1841 17.1997 16.0669 17.3169C15.9497 17.4341 15.7907 17.5 15.625 17.5H4.375C4.20929 17.5 4.05029 17.4341 3.93311 17.3169C3.81592 17.1997 3.75 17.0407 3.75 16.875V3.125C3.75 2.95929 3.81592 2.80029 3.93311 2.68311C4.05029 2.56592 4.20929 2.5 4.375 2.5ZM8.61115 12.7037C9.02222 12.9784 9.50562 13.125 10 13.125C10.663 13.125 11.299 12.8616 11.7677 12.3927C12.2366 11.924 12.5 11.288 12.5 10.625C12.5 10.1306 12.3534 9.64722 12.0787 9.23615C11.8039 8.82492 11.4136 8.50449 10.9567 8.31528C10.4999 8.12607 9.99725 8.07663 9.51233 8.17307C9.02725 8.2695 8.58185 8.50754 8.23227 8.85727C7.88254 9.20685 7.6445 9.65225 7.54807 10.1373C7.45163 10.6223 7.50107 11.1249 7.69028 11.5817C7.87949 12.0386 8.19992 12.4289 8.61115 12.7037Z" fill="none" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M10 7.5C10 7.5 11.2944 7.5 12.2097 8.41529C12.2097 8.41529 13.125 9.33058 13.125 10.625C13.125 10.625 13.125 11.9194 12.2097 12.8347C12.2097 12.8347 11.2944 13.75 10 13.75C10 13.75 8.70558 13.75 7.79029 12.8347C7.79029 12.8347 6.875 11.9194 6.875 10.625C6.875 10.625 6.875 9.33058 7.79029 8.41529C7.79029 8.41529 8.70558 7.5 10 7.5ZM10 8.75C10 8.75 9.22335 8.75 8.67418 9.29917C8.67418 9.29917 8.125 9.84835 8.125 10.625C8.125 10.625 8.125 11.4017 8.67418 11.9508C8.67418 11.9508 9.22335 12.5 10 12.5C10 12.5 10.7767 12.5 11.3258 11.9508C11.3258 11.9508 11.875 11.4017 11.875 10.625C11.875 10.625 11.875 9.84835 11.3258 9.29917C11.3258 9.29917 10.7767 8.75 10 8.75Z" />
            <path d="M11.8168 14.1789C12.6746 14.6078 13.25 15.375 13.25 15.375C13.3495 15.5076 13.4975 15.5953 13.6616 15.6187C13.6909 15.6229 13.7204 15.625 13.75 15.625L13.7521 15.625C13.8866 15.6245 14.0174 15.5807 14.125 15.5C14.2824 15.382 14.375 15.1967 14.375 15L14.3749 14.9918C14.3732 14.8594 14.3295 14.7309 14.25 14.625C13.4975 13.6217 12.3758 13.0609 12.3758 13.0609C11.2541 12.5 10 12.5 10 12.5C8.74589 12.5 7.62418 13.0609 7.62418 13.0609C6.50247 13.6217 5.75 14.625 5.75 14.625C5.66886 14.7332 5.625 14.8648 5.625 15L5.62502 15.0055C5.62527 15.0332 5.62736 15.0609 5.63128 15.0884C5.65472 15.2525 5.74239 15.4005 5.875 15.5C5.98319 15.5811 6.11477 15.625 6.25 15.625L6.2555 15.625C6.28324 15.6247 6.31093 15.6226 6.33839 15.6187C6.50248 15.5953 6.65054 15.5076 6.75 15.375C7.32542 14.6078 8.18319 14.1789 8.18319 14.1789C9.04097 13.75 10 13.75 10 13.75C10.959 13.75 11.8168 14.1789 11.8168 14.1789Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M15.625 1.875C15.625 1.875 16.1428 1.875 16.5089 2.24112C16.5089 2.24112 16.875 2.60723 16.875 3.125V16.875C16.875 16.875 16.875 17.3928 16.5089 17.7589C16.5089 17.7589 16.1428 18.125 15.625 18.125H4.375C4.375 18.125 3.85723 18.125 3.49112 17.7589C3.49112 17.7589 3.125 17.3928 3.125 16.875L3.125 3.125C3.125 3.125 3.125 2.60723 3.49112 2.24112C3.49112 2.24112 3.85723 1.875 4.375 1.875L15.625 1.875ZM15.625 3.125L4.375 3.125L4.375 16.875H15.625V3.125Z" />
            <path d="M7.5 5.625H12.5C12.8452 5.625 13.125 5.34518 13.125 5C13.125 4.65482 12.8452 4.375 12.5 4.375H7.5C7.15482 4.375 6.875 4.65482 6.875 5C6.875 5.34518 7.15482 5.625 7.5 5.625Z" />
          </svg>
        </span>

        <span :class="bem('name')">Профиль</span>
      </router-link>
    </div>
    <div :class="bem('item')">
      <router-link to="/top" @click="onClose" active-class="active" :class="bem('link')">
        <!-- <Fa icon="chart-pie"/> -->
        <span :class="bem('icon')">
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.62505 11.375C2.53983 10.9217 2.49794 10.4613 2.50008 10C2.49908 8.44887 2.97951 6.93573 3.87512 5.66933C4.77074 4.40285 6.03729 3.44566 7.50008 2.92969V8.55469L2.62505 11.375Z" fill-opacity="0.1" />
            <path d="M10.625 10V2.5C10.625 2.15482 10.3452 1.875 10 1.875C9.65482 1.875 9.375 2.15482 9.375 2.5V10C9.375 10.3452 9.65482 10.625 10 10.625C10.3452 10.625 10.625 10.3452 10.625 10Z" />
            <path d="M3.19567 13.2085L3.1952 13.2088C3.05167 13.2917 2.94695 13.4282 2.90408 13.5884C2.88996 13.6411 2.88281 13.6954 2.88281 13.75C2.88281 13.7566 2.88292 13.7632 2.88313 13.7698C2.8864 13.8728 2.91507 13.9734 2.96661 14.0626C3.07827 14.2559 3.28457 14.375 3.50781 14.375C3.51752 14.375 3.52723 14.3748 3.53693 14.3743C3.63671 14.3697 3.73392 14.3412 3.82042 14.2912L3.82089 14.2909L16.8048 6.7912C16.9981 6.67954 17.1172 6.47325 17.1172 6.25C17.1172 6.24029 17.117 6.23058 17.1165 6.22089C17.1119 6.1211 17.0834 6.02389 17.0334 5.93739C16.9505 5.79386 16.814 5.68913 16.6538 5.64626C16.6011 5.63215 16.5468 5.625 16.4922 5.625C16.4856 5.625 16.479 5.6251 16.4724 5.62531C16.3694 5.62858 16.2688 5.65726 16.1796 5.7088L3.19567 13.2085Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M7.81303 9.09568L2.93803 11.916C2.79455 11.999 2.62398 12.0216 2.46383 11.9788C2.30368 11.9361 2.16707 11.8315 2.08407 11.688C2.04866 11.6268 2.0239 11.56 2.01083 11.4905C2.01083 11.4905 1.8716 10.7503 1.87506 9.99712C1.87506 9.99712 1.87341 7.41738 3.36482 5.30843C3.36482 5.30843 4.85623 3.19949 7.29216 2.34028C7.44848 2.28514 7.6203 2.29436 7.76983 2.36591C7.91935 2.43745 8.03433 2.56547 8.08947 2.72179C8.11302 2.78857 8.12506 2.85887 8.12506 2.92969V8.55469C8.12506 8.77778 8.00614 8.98396 7.81303 9.09568ZM3.13294 10.3591L6.87506 8.19421V3.87232C6.87506 3.87232 5.38132 4.6219 4.38541 6.03017C4.38541 6.03017 3.12367 7.81436 3.12505 10.0029C3.12505 10.0029 3.12423 10.1814 3.13294 10.3591Z" />
            <path d="M6.59931 15.9755C5.00112 15.0662 4.07024 13.4805 4.07024 13.4805C3.98633 13.3375 3.84906 13.2338 3.68864 13.192C3.63725 13.1786 3.58436 13.1719 3.53125 13.1719C3.52318 13.1719 3.5151 13.172 3.50703 13.1723C3.40407 13.1763 3.3037 13.2057 3.21484 13.2579C3.02367 13.3701 2.90625 13.5752 2.90625 13.7969L2.90625 13.7987C2.90657 13.9093 2.93625 14.0179 2.99226 14.1133C4.09239 15.9873 5.98116 17.062 5.98116 17.062C7.86993 18.1366 10.043 18.1249 10.043 18.1249C12.2161 18.1132 14.0931 17.0182 14.0931 17.0182C15.9702 15.9232 17.05 14.0374 17.05 14.0374C18.1299 12.1516 18.1241 9.97854 18.1241 9.97854C18.1184 7.80546 17.0286 5.92538 17.0286 5.92538C15.9388 4.04531 14.056 2.96028 14.056 2.96028C12.1732 1.87525 10.0001 1.875 10.0001 1.875C9.96188 1.875 9.92383 1.87849 9.88634 1.88542C9.59005 1.94022 9.37503 2.19861 9.375 2.49993C9.375 2.50996 9.37524 2.51998 9.37572 2.52995C9.38316 2.68515 9.44815 2.83201 9.55801 2.94189C9.6752 3.05911 9.83417 3.12498 9.99993 3.125H10.0002C11.8388 3.12528 13.4319 4.04331 13.4319 4.04331C15.025 4.96141 15.9471 6.55225 15.9471 6.55225C16.8693 8.14308 16.8741 9.98184 16.8741 9.98184C16.879 11.8206 15.9653 13.4163 15.9653 13.4163C15.0516 15.012 13.4633 15.9385 13.4633 15.9385C11.875 16.865 10.0362 16.8749 10.0362 16.8749C8.1975 16.8848 6.59931 15.9755 6.59931 15.9755Z" />
          </svg>

        </span>

        <span :class="bem('name')">Рейтинги</span>
      </router-link>
    </div>
    <div :class="bem('item')">
      <!-- <router-link to="#" @click="toggle" :class="[bem('link'), {active: isActive}]"> -->
      <router-link :to="{ name: PAGE_NAMES.courses }" @click="onClose" active-class="active" :class="bem('link')">
        <!-- <Fa :icon="['far','folder-closed']"/> -->
        <span :class="bem('icon')">
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.28912 8.125H2.5V5C2.5 4.83421 2.56592 4.67529 2.68311 4.55803C2.80029 4.44084 2.95929 4.375 3.125 4.375H7.28912C7.42416 4.37553 7.55554 4.41933 7.66403 4.49997L10 6.25L7.66403 8.00003C7.55554 8.08067 7.42416 8.12447 7.28912 8.125Z" fill-opacity="0.1" />
            <path d="M3.125 15.625V8.125C3.125 7.77982 2.84518 7.5 2.5 7.5C2.15482 7.5 1.875 7.77982 1.875 8.125V15.625C1.875 16.1428 2.24112 16.5089 2.24112 16.5089C2.60723 16.875 3.125 16.875 3.125 16.875H16.875C17.3928 16.875 17.7589 16.5089 17.7589 16.5089C18.125 16.1428 18.125 15.625 18.125 15.625V6.875C18.125 6.35723 17.7589 5.99112 17.7589 5.99112C17.3928 5.625 16.875 5.625 16.875 5.625H10C9.65482 5.625 9.375 5.90482 9.375 6.25C9.375 6.59518 9.65482 6.875 10 6.875H16.875V15.625H3.125Z" />
            <path fill-rule="evenodd" clip-rule="evenodd" d="M8.037 8.50154C8.037 8.50154 7.70541 8.74811 7.29225 8.74999L7.29165 8.74999L7.28906 8.75H2.5C2.15482 8.75 1.875 8.47018 1.875 8.125V5C1.875 5 1.875 4.48223 2.24112 4.11612C2.24112 4.11612 2.60723 3.75 3.125 3.75L7.29163 3.75001C7.29163 3.75001 7.70516 3.75171 8.03879 3.9998L10.3747 5.7498C10.4223 5.78544 10.4646 5.82769 10.5002 5.87527C10.5996 6.00793 10.6422 6.17464 10.6187 6.33872C10.5951 6.5028 10.5074 6.65082 10.3747 6.7502L8.037 8.50154ZM7.28676 7.5C7.28676 7.5 7.28917 7.49991 7.29112 7.49846L8.95759 6.25L7.28933 5.0002C7.28933 5.0002 7.28906 5.00001 7.28649 4.99999L3.125 5V7.5H7.28676Z" />
          </svg>
        </span>

        <span :class="bem('name')">Курсы</span>

        <span :class="[bem('link-sub'), { active: isActive }]" @click="toggle">
          <svg viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd" d="M3.64645 5.65967C3.84171 5.44678 4.15829 5.44678 4.35355 5.65967L7.64645 9.25C7.84171 9.4629 8.15829 9.4629 8.35355 9.25L11.6464 5.65968C11.8417 5.44678 12.1583 5.44678 12.3536 5.65968C12.5488 5.87257 12.5488 6.21775 12.3536 6.43065L9.06066 10.021C8.47487 10.6597 7.52513 10.6597 6.93934 10.021L3.64645 6.43065C3.45118 6.21775 3.45118 5.87257 3.64645 5.65967Z" />
          </svg>
        </span>
      </router-link>

      <div :class="bem('submenu')" v-show="isOpen">
        <div :class="bem('submenu-item')">
          <router-link to="#" :class="bem('submenu-link')">Презентации</router-link>
        </div>
        <div :class="bem('submenu-item')">
          <router-link to="#" :class="bem('submenu-link')">Встречи</router-link>
        </div>
        <div :class="bem('submenu-item')">
          <router-link to="#" :class="bem('submenu-link')">Звонки</router-link>
        </div>
        <div :class="bem('submenu-item')">
          <router-link to="#" :class="bem('submenu-link')">Презентации</router-link>
        </div>
        <div :class="bem('submenu-item')">
          <router-link to="#" :class="bem('submenu-link')">Встречи</router-link>
        </div>
      </div>
    </div>
    <div :class="bem('item')">
      <router-link
        :to="{ name: PAGE_NAMES.logout }"
        @click="onClose"
        active-class="active"
        :class="bem('link')"
      >
        <!-- <Fa icon="right-to-bracket"/> -->
        <span :class="bem('icon')">
          <svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M8.44444 13.8889L7.375 12.7611L9.35833 10.7778H3V9.22222H9.35833L7.375 7.23889L8.44444 6.11111L12.3333 10L8.44444 13.8889ZM10 17V15.4444H15.4444V4.55556H10V3H17V17H10Z" />
          </svg>
        </span>

        <span :class="bem('name')">Выход</span>
      </router-link>
    </div>
  </nav>
</template>
<script>
import {noop} from 'lodash';
import useBem from 'vue3-bem';
import {PAGE_NAMES} from '../../constants';

const bem = useBem('main-menu');

export default {
  data: () => ({
    PAGE_NAMES,
    bem,
    isOpen: true,
    isActive: false
  }),
  props: {
    onClose: {
      type: Function,
      default: noop
    }
  },
  methods: {
    toggle() {
      this.isOpen = !this.isOpen;
      this.isActive = !this.isActive;
    }
  }
};
</script>
<style lang="scss" scoped>
@import "@sass/media";

.main-menu
{
    margin: 0;
  display: inline-block;
  min-width: 192px;

    &__item + &__item
    {
        margin-top: 11px;
    }

  @media (min-width: $mb_exlarge) {
    &__item._nopc{
      display: none;
    }
  }

    &__link
    {
        position: relative;

        color: #1C1C1C;
        font-size: 16px;
        font-weight: 500;

        font-style: normal;
        line-height: 1.25;

        display: flex;
        justify-content: flex-start;
        align-content: center;
        align-items: center;
        flex-wrap: nowrap;

        padding: 11px 16px;

        text-decoration: none;

        border-radius: 50px;

        transition: color .2s linear;

        &:before
        {
            content: "";

            position: absolute;
            top: 0;
            left: 0;

            width: 100%;
            height: 100%;

            opacity: 0;
            border-radius: 50px;
            background: linear-gradient(84.09deg, #D485F1 4.37%, #7156F8 94.11%);

            transition: opacity .2s linear;
        }

    @media (any-hover: hover) {
      &:hover
      {
        color: #FFF;

        &:before
        {
          opacity: 1;
        }

        svg
        {
          fill: currentColor;
        }

        .main-menu__link-sub{
          color: currentColor;
        }
      }
    }

    &.active
    {
      color: #FFF;

      &:before
      {
        opacity: 1;
      }

      svg
      {
        fill: currentColor;
      }

      .main-menu__link-sub{
        color: currentColor;
      }
    }
    }

  @media (min-width: $mb_exlarge) {
    .small &__link{
      width: 42px;
      justify-content: center;

      padding-left: 11px;
      padding-right: 11px;
    }
  }

  &__link-sub{
    position: absolute;
    right: 0;
    top: 0;
    width: 32px;
    height: 100%;
    display: flex;
    justify-content: flex-start;
    align-items: center;
    align-content: center;
    flex-wrap: wrap;

    color: rgba(0, 0, 0, 0.2);
    border-radius: 0 50px 50px 0;

    svg{
      display: block;
      width: 16px;
      height: 16px;

      fill: currentColor;
    }
  }

    &__icon
    {
        position: relative;

        display: flex;
        justify-content: center;
        align-content: center;
        align-items: center;
        flex-shrink: 0;
        flex-wrap: wrap;

        width: 20px;
        height: 20px;
        margin-right: 10px;

        img
        {
            display: block;

            max-width: 100%;
            max-height: 100%;
        }

        svg
        {
            display: block;

            max-width: 100%;
            max-height: 100%;

            transition: fill .2s linear;

            fill: #7B7B7B;
        }
    }

  @media (min-width: $mb_exlarge) {
    .small &__icon{
      margin-right: 0;
    }
  }

    &__name
    {
        position: relative;

        display: block;
    }

  @media (min-width: $mb_exlarge) {
    .small &__name{
      display: none;
    }
  }

  &__submenu
  {
    margin-top: 7px;
    padding-bottom: 13px;
  }

  @media (min-width: $mb_exlarge) {
    .small &__submenu{
      display: none;
    }
  }

    &__submenu-item + &__submenu-item
    {
        margin-top: 4px;
    }

  &__submenu-link
    {
        color: #1C1C1C;
        font-size: 14px;
        font-weight: 400;

        font-style: normal;
        line-height: 1.43;

        display: block;

        padding: 4px 16px 4px 46px;

        text-decoration: none;

        transition: color .2s linear;

    @media (any-hover: hover) {
      &:hover
      {
        color: #7156F8;
      }
    }
    }

  @media (min-width: $mb_exlarge) {
    .small &{
      min-width: 1px;
      width: 42px;
      margin: 0 auto;
      display: block;
    }
  }
}
</style>
